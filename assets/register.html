<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>register</title>
</head>
<body>
    <form id="form_reg" action="" method="post" style="display: flex; flex-flow: column;">
        Email: <input type="email" name="email" id="email" required>
        User Name: <input type="text" name="name" id="name" required>
        Password: <input type="password" name="password" id="password" required>
        <button type="submit" style="background-color: blueviolet; padding: 10px;margin-top: 10px;">register</button>
    </form>
</body>
<script type="">
document.querySelector('form#form_reg').addEventListener('submit',async (e)=>{
    e.preventDefault();
    const email = document.querySelector('input#email').value.trim()
    const name = document.querySelector('input#name').value.trim()
    const password = document.querySelector('input#password').value.trim()
    try {
        const response = await fetch('https://82d0-118-71-62-83.ngrok-free.app/api/register',{
            method: 'post',
            headers: {"ngrok-skip-browser-warning":true,
                    'content-type':'application/json'},
            body: JSON.stringify({name,email,password})
        })

        const data = await response.json();
        console.log(data);
        if(response.ok){
            alert("successfully!");
            setTimeout(()=>window.location.href = '/assets/login.html',100)
        }else{
            console.log(data?.message || "Anything was wrong!")
        }
    } catch (error) {
        console.log(error)
    }
})
</script>
</html>